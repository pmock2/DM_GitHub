package teamHarambe;

import java.util.ArrayDeque;
import java.util.Calendar;

import org.json.JSONObject;

public class AuditLog {
	private static final int LOG_CAPACITY = 100;
	
	private ArrayDeque<JSONObject> logs = new ArrayDeque<>();
	
	public AuditLog() {
		
	}
	
	public AuditLog(JSONObject logs) {
		
	}
	
	public void logAction(String action, Referee referee) {
		int refereeId = referee.getId();
		Calendar today = Calendar.getInstance();
		
		if (logs.size() == LOG_CAPACITY) {
			logs.removeLast();
		}

		JSONObject data = new JSONObject();
		data.put("ActionType", action);
		data.put("Referee", refereeId);
		data.put("Date", today.getTimeInMillis());
		
		logs.addFirst(data);
		Server.saveData();
	}
}
